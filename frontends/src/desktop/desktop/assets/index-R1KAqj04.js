var se=Object.defineProperty;var ce=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var T=(e,t,n)=>ce(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function A(){}function ee(e){return e()}function V(){return Object.create(null)}function I(e){e.forEach(ee)}function te(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function fe(e){return Object.keys(e).length===0}function d(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function de(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function v(){return D(" ")}function ne(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ae(e){return Array.from(e.childNodes)}function L(e,t){t=""+t,e.data!==t&&(e.data=t)}function E(e,t,n){e.classList.toggle(t,!!n)}let R;function $(e){R=e}function oe(){if(!R)throw new Error("Function called outside component initialization");return R}function pe(e){oe().$$.on_mount.push(e)}function he(e){oe().$$.on_destroy.push(e)}const C=[],B=[];let N=[];const H=[],_e=Promise.resolve();let U=!1;function me(){U||(U=!0,_e.then(ie))}function j(e){N.push(e)}const z=new Set;let O=0;function ie(){if(O!==0)return;const e=R;do{try{for(;O<C.length;){const t=C[O];O++,$(t),ge(t.$$)}}catch(t){throw C.length=0,O=0,t}for($(null),C.length=0,O=0;B.length;)B.pop()();for(let t=0;t<N.length;t+=1){const n=N[t];z.has(n)||(z.add(n),n())}N.length=0}while(C.length);for(;H.length;)H.pop()();U=!1,z.clear(),$(e)}function ge(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}function be(e){const t=[],n=[];N.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),N=t}const ye=new Set;function we(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function q(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ve(e,t,n){const{fragment:i,after_update:l}=e.$$;i&&i.m(t,n),j(()=>{const o=e.$$.on_mount.map(ee).filter(te);e.$$.on_destroy?e.$$.on_destroy.push(...o):I(o),e.$$.on_mount=[]}),l.forEach(j)}function Ee(e,t){const n=e.$$;n.fragment!==null&&(be(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ke(e,t){e.$$.dirty[0]===-1&&(C.push(e),me(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function De(e,t,n,i,l,o,s=null,c=[-1]){const u=R;$(e);const r=e.$$={fragment:null,ctx:[],props:o,update:A,not_equal:l,bound:V(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:V(),dirty:c,skip_bound:!1,root:t.target||u.$$.root};s&&s(r.root);let y=!1;if(r.ctx=n?n(e,t.props||{},(h,f,...a)=>{const p=a.length?a[0]:f;return r.ctx&&l(r.ctx[h],r.ctx[h]=p)&&(!r.skip_bound&&r.bound[h]&&r.bound[h](p),y&&ke(e,h)),f}):[],r.update(),y=!0,I(r.before_update),r.fragment=i?i(r.ctx):!1,t.target){if(t.hydrate){const h=ae(t.target);r.fragment&&r.fragment.l(h),h.forEach(S)}else r.fragment&&r.fragment.c();t.intro&&we(e.$$.fragment),ve(e,t.target,t.anchor),ie()}$(u)}class Oe{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){Ee(this,1),this.$destroy=A}$on(t,n){if(!te(n))return A;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!fe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ce="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ce);function Ne(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}async function P(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}var Y;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(Y||(Y={}));async function Se(e,t){await P("plugin:event|unlisten",{event:e,eventId:t})}async function G(e,t,n){var i;const l=(i=void 0)!==null&&i!==void 0?i:{kind:"Any"};return P("plugin:event|listen",{event:e,target:l,handler:Ne(t)}).then(o=>async()=>Se(e,o))}function K(e,t,n){const i=e.slice();return i[9]=t[n],i}function Q(e){let t,n,i,l,o,s,c,u,r,y;return{c(){t=g("div"),n=g("div"),i=g("strong"),i.textContent="Error:",l=v(),o=g("span"),s=D(e[2]),c=v(),u=g("button"),u.textContent="Ã—",b(i,"class","font-bold"),b(o,"class","block sm:inline"),b(u,"class","ml-4 font-bold"),b(t,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 flex items-start justify-between")},m(h,f){W(h,t,f),d(t,n),d(n,i),d(n,l),d(n,o),d(o,s),d(t,c),d(t,u),r||(y=ne(u,"click",e[5]),r=!0)},p(h,f){f&4&&L(s,h[2])},d(h){h&&S(t),r=!1,y()}}}function Z(e){let t,n,i,l,o,s,c,u,r,y,h;return{c(){t=g("div"),n=g("h2"),n.textContent="Your Connection Ticket:",i=v(),l=g("div"),o=D(e[0]),s=v(),c=g("button"),u=D("Copy Ticket"),b(n,"class","font-semibold mb-2"),b(l,"class","bg-white p-3 rounded break-all mb-2 font-mono text-sm"),b(c,"class","bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors disabled:bg-gray-400"),c.disabled=r=!e[0],b(t,"class","bg-gray-100 p-4 rounded mb-4")},m(f,a){W(f,t,a),d(t,n),d(t,i),d(t,l),d(l,o),d(t,s),d(t,c),d(c,u),y||(h=ne(c,"click",e[4]),y=!0)},p(f,a){a&1&&L(o,f[0]),a&1&&r!==(r=!f[0])&&(c.disabled=r)},d(f){f&&S(t),y=!1,h()}}}function J(e){let t,n,i,l,o=q([...e[3]]),s=[];for(let c=0;c<o.length;c+=1)s[c]=X(K(e,o,c));return{c(){t=g("div"),n=g("h2"),n.textContent="Connected Devices:",i=v(),l=g("ul");for(let c=0;c<s.length;c+=1)s[c].c();b(n,"class","font-semibold mb-2"),b(l,"class","list-disc pl-5"),b(t,"class","mt-4")},m(c,u){W(c,t,u),d(t,n),d(t,i),d(t,l);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(c,u){if(u&8){o=q([...c[3]]);let r;for(r=0;r<o.length;r+=1){const y=K(c,o,r);s[r]?s[r].p(y,u):(s[r]=X(y),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(c){c&&S(t),de(s,c)}}}function X(e){let t,n=e[9]+"",i;return{c(){t=g("li"),i=D(n),b(t,"class","text-gray-700")},m(l,o){W(l,t,o),d(t,i)},p(l,o){o&8&&n!==(n=l[9]+"")&&L(i,n)},d(l){l&&S(t)}}}function $e(e){let t,n,i,l,o,s,c,u,r,y,h,f,a=e[2]&&Q(e),p=e[0]&&Z(e),_=e[3].size>0&&J(e);return{c(){t=g("main"),n=g("div"),i=g("h1"),i.textContent="Desktop Connection",l=v(),o=g("div"),s=g("p"),c=D("Status: "),u=g("span"),r=D(e[1]),y=v(),a&&a.c(),h=v(),p&&p.c(),f=v(),_&&_.c(),b(i,"class","text-2xl font-bold mb-4"),b(u,"class","px-2 py-1 rounded"),E(u,"text-blue-600",e[1].includes("Ready")),E(u,"text-yellow-600",e[1].includes("trying")),E(u,"text-green-600",e[1].includes("successfully")),E(u,"text-red-600",e[1].includes("Failed")||e[1].includes("disconnected")),b(s,"class","font-semibold"),b(o,"class","mb-4"),b(n,"class","max-w-2xl mx-auto"),b(t,"class","container p-4 mx-auto")},m(m,w){W(m,t,w),d(t,n),d(n,i),d(n,l),d(n,o),d(o,s),d(s,c),d(s,u),d(u,r),d(n,y),a&&a.m(n,null),d(n,h),p&&p.m(n,null),d(n,f),_&&_.m(n,null)},p(m,[w]){w&2&&L(r,m[1]),w&2&&E(u,"text-blue-600",m[1].includes("Ready")),w&2&&E(u,"text-yellow-600",m[1].includes("trying")),w&2&&E(u,"text-green-600",m[1].includes("successfully")),w&2&&E(u,"text-red-600",m[1].includes("Failed")||m[1].includes("disconnected")),m[2]?a?a.p(m,w):(a=Q(m),a.c(),a.m(n,h)):a&&(a.d(1),a=null),m[0]?p?p.p(m,w):(p=Z(m),p.c(),p.m(n,f)):p&&(p.d(1),p=null),m[3].size>0?_?_.p(m,w):(_=J(m),_.c(),_.m(n,null)):_&&(_.d(1),_=null)},i:A,o:A,d(m){m&&S(t),a&&a.d(),p&&p.d(),_&&_.d()}}}function Ae(e,t,n){var i=this&&this.__awaiter||function(f,a,p,_){function m(w){return w instanceof p?w:new p(function(x){x(w)})}return new(p||(p=Promise))(function(w,x){function le(k){try{F(_.next(k))}catch(M){x(M)}}function re(k){try{F(_.throw(k))}catch(M){x(M)}}function F(k){k.done?w(k.value):m(k.value).then(le,re)}F((_=_.apply(f,a||[])).next())})};let l="",o="Initializing...",s="",c=new Set,u=[];function r(){return i(this,void 0,void 0,function*(){const f=yield G("peer-connected",()=>{n(1,o="Mobile device trying to connect...")}),a=yield G("sync-complete",()=>{n(1,o="Mobile device connected successfully")}),p=yield G("peer-down",_=>{c.delete(_.payload),n(3,c),n(1,o="Mobile device disconnected")});u.push(f,a,p)})}pe(()=>i(void 0,void 0,void 0,function*(){try{yield r(),n(0,l=yield P("get_ticket")),n(1,o="Ready to connect. Share the ticket with mobile device.")}catch(f){n(2,s=f.toString()),n(1,o="Failed to initialize"),console.error("Error generating ticket:",f)}})),he(()=>{u.forEach(f=>f())});function y(){return i(this,void 0,void 0,function*(){try{yield navigator.clipboard.writeText(l);const f=o;n(1,o="Ticket copied to clipboard!"),setTimeout(()=>{n(1,o=f)},2e3)}catch(f){n(2,s="Failed to copy ticket"),console.error("Copy error:",f)}})}return[l,o,s,c,y,()=>n(2,s="")]}class Re extends Oe{constructor(t){super(),De(this,t,Ae,$e,ue,{})}}new Re({target:document.body});
